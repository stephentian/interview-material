# 网络安全


## XSS(跨站脚本攻击)
> cross site scripting

### 攻击原理
允许用户将恶意代码植入到其他用户使用的界面。
恶意攻击者往 Web 页面里插入恶意 javaScript 代码，当用户浏览该页之时，嵌入其中 Web 里面的 javaScript 代码会被执行，从而达到恶意攻击用户的目的。

### 攻击分类

#### 1. 反射型
非持久性跨站点脚本攻击。
诱导用户访问一个被篡改的链接，通过 url 参数直接注入。然后在响应的数据中包含着危险的代码

#### 2. 存储型
持久型跨站点脚本。
它一般发生在XSS攻击向量(一般指XSS攻击代码)存储在网站数据库，当一个页面被用户打开的时候执行。
比非持久性XSS攻击危害性更大。

比如：
网页有一个发表评论的功能，该评论会写入后台数据库，并且访问主页的时候，会从数据库中加载出所有的评论。
用户添加一个评论，并且暗藏一个脚本。
当别人访问主页的时候，刚刚黑客写入的评论里面的脚本被浏览器当成代码执行了，用户莫名其妙受到攻击。

### 防范措施
1. 对输入的数据进行转义保存，在输出时再进行还原，
2. 对输入的数据进行过滤，确保输入数据符合我们的期望（数据类型、长度、过滤空格/特殊字符、判断唯一性等），
3. 尽量避免使用 `eval` 或者 `new Function` 等执行字符串方法。

## CSRF(跨站请求伪造)
> cross site request forgery

### 攻击原理
冒充用户发送一些违反用户意愿的请求。
比如用户原来访问过 A 网站，存了登录 A 网站的 Cookie,
然后用户访问 B 网站时，B 网站可能有过引诱链接，这个链接是访问 A 网站的，
可能用户点击了链接，但是用户不清楚自己进了 A 网站。（新浪微博莫名其妙增加关注）

### 防御措施
1. Token 验证
2. Referer 验证
  检查 HTTP 请求头 referer 是否为同源（Origin）
3. 隐藏令牌
  隐藏令牌，类似 token， 比如藏在 http header 中
